(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){e.exports=n(259)},127:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(27),c=n.n(r),l=(n(127),n(18)),o=n(21),s=n(22),u=n(24),m=n(23),h=n(25),p=n(9),d="https://danielgiraldo.com/Spotify_TopTen/",f=i.a.createContext({}),g=i.a.createContext({}),y=f.Provider,b=f.Consumer,x=g.Provider,v=g.Consumer,j=n(33),O=Object(j.createMuiTheme)({palette:{type:"dark",primary:{main:"#1DB954"},secondary:{main:"#191414"}}}),w=n(119),E=n.n(w),k=(n(185),n(4)),S=function(e){var t=e.className,n=e.bgColor;return i.a.createElement("div",{className:t},i.a.createElement("svg",{viewBox:"0 0 32 32"},i.a.createElement("path",{fill:n,style:{fill:n},d:"M16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.12-16-16-16zM23.361 23.12c-0.32 0.479-0.88 0.64-1.361 0.32-3.76-2.32-8.48-2.801-14.081-1.521-0.557 0.163-1.039-0.239-1.199-0.719-0.16-0.561 0.24-1.040 0.72-1.2 6.080-1.361 11.36-0.8 15.52 1.76 0.56 0.24 0.639 0.879 0.401 1.36zM25.281 18.72c-0.401 0.56-1.121 0.8-1.683 0.4-4.319-2.64-10.879-3.44-15.919-1.84-0.639 0.16-1.36-0.16-1.52-0.8s0.16-1.361 0.8-1.521c5.84-1.759 13.040-0.877 18 2.161 0.481 0.241 0.72 1.040 0.321 1.6zM25.441 14.24c-5.121-3.040-13.681-3.36-18.561-1.839-0.8 0.239-1.6-0.241-1.84-0.961-0.24-0.801 0.24-1.6 0.96-1.841 5.68-1.68 15.040-1.36 20.961 2.161 0.719 0.4 0.959 1.36 0.559 2.080-0.399 0.561-1.36 0.799-2.079 0.4z"})))},C=n(31),N=n.n(C),_=Object(j.withStyles)(function(e){return{container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",margin:"5px",marginBottom:"20px",transition:"all .1s .2s linear"},logoIcon:{width:"5em",height:"5em",marginRight:"15px"},logoText:{fontSize:"4em",fontWeight:"700"},indentedContainer:{margin:"0px"},indentedIcon:{width:"3em",height:"3em",marginRight:"15px"},indentedText:Object(k.a)({width:"0px",overflow:"hidden"},e.breakpoints.up(640),{width:"auto",fontSize:"2em"})}})(function(e){var t=e.classes,n=e.indented,a=n?[t.container,t.indentedContainer]:[t.container],r=n?[t.logoIcon,t.indentedIcon]:[t.logoIcon],c=n?[t.logoText,t.indentedText]:[t.logoText];return i.a.createElement("div",{className:a.join(" ")},i.a.createElement(S,{className:r.join(" "),bgColor:"#1DB954"}),i.a.createElement(N.a,{variant:"h1",component:"h1",className:c.join(" ")},"TopTen"))}),A=n(111),I=n(112),R=n.n(I),P=n(190),z=n.n(P),T=n(191),B=n.n(T),D=n(192),F=n.n(D),W=n(193),M=n.n(W),q=n(29),H=n.n(q),J=n(188),L=n(189),U=n.n(L),G=n(194),V=n.n(G),Y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={query:"",searchResults:[]},n.inputRef=i.a.createRef(),n.handleChange=n.handleChange.bind(Object(p.a)(Object(p.a)(n))),n.resetSearch=n.resetSearch.bind(Object(p.a)(Object(p.a)(n))),n.searchArtist=Object(A.a)(300,n.searchArtist),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.searchArtist(t)}},{key:"resetSearch",value:function(){this.inputRef.current.value="",this.setState(Object(l.a)({},this.state,{query:"",searchResults:[]}))}},{key:"searchArtist",value:function(e){var t=this;if(e){var n="search?q=".concat(e,"&type=artist&limit=10");this.context.isSearching(!0),this.context.searchSpotify(n).then(function(n){var a=n.artists.items.filter(function(e){return e.images.length});t.setState(Object(l.a)({},t.state,{query:e,searchResults:a}))})}else this.context.isSearching(!1),this.resetSearch()}},{key:"render",value:function(){var e=this,t=this.state.searchResults,n=this.props,a=n.classes,r=n.indented,c=r&&this.state.query?[a.container,a.indented,a.searchingIndented]:r?[a.container,a.indented]:this.state.query?[a.container,a.searching]:[a.container],l=this.state.query?r?a.resultsIndented:a.results:"";return i.a.createElement(b,null,function(n){return e.context=n,i.a.createElement(J.a,{className:c.join(" ")},i.a.createElement(R.a,{className:a.searchBar,autoFocus:!0,placeholder:"Search Artist",type:"search",inputRef:e.inputRef,onChange:function(t){e.handleChange(t)}}),i.a.createElement(U.a,{in:!!e.state.query},i.a.createElement(J.a,{className:l},e.state.query?t.length?i.a.createElement(z.a,{component:"nav"},t.map(function(t){return i.a.createElement(i.a.Fragment,{key:t.id},i.a.createElement(B.a,{button:!0,onClick:function(){e.context.setArtist(t),e.resetSearch()}},i.a.createElement(F.a,{alt:t.name,src:t.images[0].url}),i.a.createElement(M.a,{primary:t.name})))})):i.a.createElement(H.a,{color:"textSecondary",variant:"h5",component:"h3",className:a.notFound},i.a.createElement(V.a,{className:a.icon}),"No Results"):null)))})}}]),t}(a.Component),$=Object(j.withStyles)(function(e){return{container:Object(k.a)({width:"90%",maxWidth:"640px",margin:"20px auto",boxSizing:"border-box",position:"relative",display:"block",height:"60px",borderRadius:"70px",zIndex:"99999",transition:"all .2s linear"},e.breakpoints.up(640),{fontSize:"2em"}),indented:Object(k.a)({height:"40px"},e.breakpoints.up(640),{marginRight:"0px",width:"300px",height:"50px"}),searchBar:{width:"100%",height:"100%",padding:"10px 40px",fontSize:"1.2rem",opacity:".7"},searching:{borderRadius:"20px",height:"auto",transition:"none"},searchingIndented:{borderRadius:"20px 20px 0 0",transition:"none"},results:{display:"block",height:"40vh!important",overflow:"scroll"},resultsIndented:{backgroundColor:"#424242",borderRadius:"0 0 20px 20px",maxHeight:"400px",overflow:"scroll"},notFound:{padding:"2em",textAlign:"center",height:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},icon:{marginRight:"10px"}}})(Y),K=Object(j.withStyles)(function(e){return{header:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"1080px",padding:"10px 20px",margin:"auto",transition:"height .2s linear"},regular:{transform:"translateY(25vh)",height:"calc(100vh - 25vh)"},indent:{height:"120px",flexDirection:"row"}}})(function(e){var t=e.classes,n=e.selected,a=n?[t.header,t.indent]:[t.header,t.regular];return i.a.createElement("header",{className:a.join(" ")},i.a.createElement(_,{indented:n}),i.a.createElement($,{indented:n}))}),Q=n(54),X=n.n(Q),Z=n(56),ee=n.n(Z),te=n(116),ne=n.n(te),ae=n(80),ie=n.n(ae),re=n(55),ce=n.n(re),le=n(195),oe=n.n(le),se=n(113),ue=n.n(se),me=n(115),he=n.n(me),pe=n(114),de=n.n(pe),fe=n(53),ge=n.n(fe),ye=Object(j.withStyles)(function(e){return{playIcon:{border:"1px solid #fff"}}})(function(e){var t=e.classes,n=e.isPlaying,a=e.onClick;return i.a.createElement(ge.a,{title:"Preview Only",placement:"right"},i.a.createElement(ue.a,{"aria-label":n?"Pause":"Play",className:t.playIcon,onClick:a},n?i.a.createElement(de.a,null):i.a.createElement(he.a,null)))}),be=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={is_playing:!1},n.playerRef=Object(p.a)(Object(p.a)(n)),n.togglePlay=n.togglePlay.bind(Object(p.a)(Object(p.a)(n))),n.pause=n.pause.bind(Object(p.a)(Object(p.a)(n))),n.play=n.play.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"togglePlay",value:function(){var e=this;this.setState(function(t){var n=!t.is_playing,a={is_track_playing:n,player_ref:e.playerRef,track_info:e.props.trackInfo};return e.playerContext.updateCurrentPlayer(Object(l.a)({},a)),{is_playing:n}})}},{key:"pause",value:function(){this.setState({is_playing:!1})}},{key:"play",value:function(){this.setState({is_playing:!0})}},{key:"render",value:function(){var e=this,t=this.props.classes;return i.a.createElement(v,null,function(n){return e.playerContext=n,i.a.createElement("div",{className:t.controls},i.a.createElement(ye,{isPlaying:e.state.is_playing,onClick:e.togglePlay}),i.a.createElement(oe.a,{url:e.props.url,config:{file:{forceAudio:!0}},playing:e.state.is_playing,className:t.player,onEnded:e.togglePlay}))})}}]),t}(a.Component),xe=Object(j.withStyles)(function(e){return{controls:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"10px"},player:{width:"0!important",height:"0!important",position:"absolute"}}})(be),ve=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={slideIn:!1},n.openOnSpotify=n.openOnSpotify.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({slideIn:!0})},this.props.delay)}},{key:"openOnSpotify",value:function(e){return window.open(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.track;return i.a.createElement(ie.a,{direction:"left",in:this.state.slideIn},i.a.createElement(ne.a,{className:n.card},i.a.createElement("div",{className:n.details},i.a.createElement(X.a,{className:n.content},i.a.createElement(H.a,{component:"h6",variant:"h6",align:"left",className:n.song},a.name),i.a.createElement(H.a,{color:"textSecondary",align:"left",className:n.albumTypo},a.album.name)),a.preview_url?i.a.createElement(xe,{url:a.preview_url,trackInfo:Object(l.a)({},a)}):i.a.createElement(ce.a,{variant:"extended",size:"medium",color:"primary","aria-label":"Open On Spotify",className:n.button,onClick:function(){return e.openOnSpotify(a.external_urls.spotify)}},"Open On Spotify")),i.a.createElement(ee.a,{className:n.cover,image:a.album.images[0].url,title:a.album.name})))}}]),t}(a.Component),je=Object(j.withStyles)(function(e){return{card:Object(k.a)({display:"flex",width:"100%"},e.breakpoints.up(460),{maxWidth:300}),details:{display:"flex",flexDirection:"column",flex:1},content:{flex:"1 0 auto"},cover:{width:150},song:{fontSize:"1.2rem",lineHeight:"1.2em",marginBottom:5},albumTypo:{fontSize:".9rem",lineHeight:"1em"},button:{display:"block",width:"auto",height:"auto",marginBottom:"10px",margin:"auto",color:"#ffffff",fontSize:".75rem"}}})(ve),Oe=n(117),we=n.n(Oe),Ee=n(121),ke=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={is_track_playing:null,player_ref:null,track_info:null},n.updateCurrentPlayer=n.updateCurrentPlayer.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"updateCurrentPlayer",value:function(e){this.setState(function(t){return t.is_track_playing&&t.player_ref.pause(),Object(l.a)({},e)})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.track_info,a=Boolean(this.state.player_ref),r=Object(l.a)({},this.state,{updateCurrentPlayer:this.updateCurrentPlayer});return i.a.createElement(b,{value:r},function(c){var o=c.selectedArtist;return o.tracks?i.a.createElement(x,{value:r},i.a.createElement("div",{className:t.container},o.tracks.map(function(e,t){return i.a.createElement(je,{track:Object(l.a)({},e),delay:25*t})})),a?i.a.createElement(we.a,{classes:{root:t.controllerContainer},anchorOrigin:{vertical:"bottom",horizontal:"center"},open:a},i.a.createElement(Ee.a,{classes:{message:t.contentContainer},className:t.controller,message:i.a.createElement(i.a.Fragment,null,i.a.createElement(ye,{isPlaying:e.state.is_track_playing,onClick:function(){return e.state.player_ref.togglePlay()}}),i.a.createElement(X.a,{className:t.content},i.a.createElement(H.a,{className:t.elipsis,component:"h6",variant:"h6",align:"left"},n.name),i.a.createElement(H.a,{className:t.elipsis,color:"textSecondary",align:"left"},n.album.name)),i.a.createElement("a",{href:n.external_urls.spotify,target:"_blank",className:t.link},i.a.createElement(ge.a,{title:"View on Spotify",placement:"top"},i.a.createElement(ee.a,{image:n.album.images[0].url,className:t.cover}))))})):null):null})}}]),t}(a.Component),Se=Object(j.withStyles)(function(e){var t;return{container:(t={display:"grid",gridTemplateColumns:"1fr",gridGap:"20px",maxWidth:"1080px",margin:" 20px auto",padding:"0px 20px",justifyItems:"center",paddingBottom:"100px"},Object(k.a)(t,e.breakpoints.up(640),{gridTemplateColumns:"repeat(2, 1fr)"}),Object(k.a)(t,e.breakpoints.up(960),{gridTemplateColumns:"repeat(3, 1fr)"}),t),controllerContainer:{width:"auto"},controller:{backgroundColor:"#333333",width:"100%",minWidth:"400px"},contentContainer:{display:"flex",flexDirection:"row",alignItems:"center",width:"100%"},content:{padding:0,marginLeft:"10px",marginRight:"10px"},link:{marginLeft:"auto"},cover:{width:"60px",height:"60px"},elipsis:{width:"250px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}})(ke),Ce=Object(j.withStyles)(function(e){return{follow:{display:"flex",flexDirection:"row",width:"auto",height:"auto",marginTop:"10px",margin:"auto",color:"#ffffff"},icon:{width:"1.2em",height:"1.2em",marginRight:"10px"}}})(function(e){var t=e.classes;return i.a.createElement(ce.a,{variant:"extended",size:"medium",color:"primary","aria-label":"Follow",className:t.follow},i.a.createElement(S,{className:t.icon,bgColor:"#ffffff"}),"Follow")}),Ne=n(118),_e=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},Ae=Object(j.withStyles)(function(e){return{container:Object(k.a)({display:"flex",flexDirection:"row",width:"100%",maxWidth:"960px",margin:"auto",justifyContent:"center",alignItems:"center",marginBottom:"30px"},e.breakpoints.up(640),{flexDirection:"column",textAlign:"center",marginBottom:"50px"}),avatar:Object(k.a)({width:"100px",height:"100px",marginRight:"20px"},e.breakpoints.up(640),{height:"200px",width:"200px",margin:"0 0 20px 0"})}})(function(e){var t=e.classes;return i.a.createElement(b,null,function(e){var n=e.selectedArtist;return n?i.a.createElement("div",null,i.a.createElement("div",{className:t.container},i.a.createElement(Ne.a,{className:t.avatar,alt:n.name,src:n.images[0].url}),i.a.createElement("div",null,i.a.createElement(N.a,{component:"h5",variant:"h5"},n.name),i.a.createElement(N.a,{color:"textSecondary"},"".concat(_e(n.followers.total||0)," Followers")),i.a.createElement(Ce,null))),i.a.createElement(Se,null)):null})}),Ie=n(120),Re=n.n(Ie),Pe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={auth_token:null,selectedArtist:null,isSearching:!1,query:"",searchResults:[]},n.searchSpotify=n.searchSpotify.bind(Object(p.a)(Object(p.a)(n))),n.setArtist=n.setArtist.bind(Object(p.a)(Object(p.a)(n))),n.isSearching=n.isSearching.bind(Object(p.a)(Object(p.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);e=n.exec(a);)t[e[1]]=decodeURIComponent(e[2]);if(t.access_token){var i=t.access_token;this.setState({auth_token:i})}else window.location.href="https://accounts.spotify.com/authorize?client_id=".concat("3eddbd422c4743b8bc218144d4401496","&response_type=token&redirect_uri=").concat(d)}},{key:"searchSpotify",value:function(e){var t=this;return new Promise(function(n){var a="".concat("https://api.spotify.com/v1/").concat(e);fetch(a,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t.state.auth_token)}}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(){window.location.replace(d)})})}},{key:"setArtist",value:function(e){var t=this;if((this.state.selectedArtist?this.state.selectedArtist.id:"")===e.id)return!1;var n="artists/".concat(e.id,"/top-tracks?country=US");this.searchSpotify(n).then(function(e){t.setState(function(t){return Object(l.a)({},t,{selectedArtist:Object(l.a)({},t.selectedArtist,e)})})}),this.setState(function(t){return Object(l.a)({},t,{selectedArtist:e})})}},{key:"isSearching",value:function(e){this.setState({isSearching:e})}},{key:"render",value:function(){var e=this.props.classes,t={auth_token:this.state.auth_token,setArtist:this.setArtist,searchSpotify:this.searchSpotify,isSearching:this.isSearching,selectedArtist:this.state.selectedArtist};return i.a.createElement(j.MuiThemeProvider,{theme:O},i.a.createElement(y,{value:t},i.a.createElement(i.a.Fragment,null,i.a.createElement(E.a,null),this.state.auth_token?i.a.createElement("div",{className:e.container},i.a.createElement(K,{selected:!!this.state.selectedArtist}),i.a.createElement(Ae,null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(Re.a,null)))))}}]),t}(a.Component),ze=Object(j.withStyles)(function(e){return{container:{minHeight:"100vh","&::before":{content:'""',position:"fixed",top:0,right:0,left:0,bottom:0,background:"linear-gradient(rgba(0,0,0,0) -30%,#191414)",zIndex:"-1"}}}})(Pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[122,2,1]]]);
//# sourceMappingURL=main.0b0bdd8f.chunk.js.map