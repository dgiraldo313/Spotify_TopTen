(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,n){e.exports=n(252)},131:function(e,t,n){},252:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(28),c=n.n(r),o=(n(131),n(26)),l=n(20),s=n(21),u=n(23),h=n(22),m=n(24),d=n(11),p="https://danielgiraldo.com/Spotify_TopTen",f=i.a.createContext({}),g=i.a.createContext({}),b=f.Provider,y=f.Consumer,x=g.Provider,v=(g.Consumer,n(29)),j=Object(v.createMuiTheme)({palette:{type:"dark",primary:{main:"#1DB954"},secondary:{main:"#191414"}}}),O=n(124),w=n.n(O),E=(n(189),n(6)),S=function(e){var t=e.className,n=e.bgColor;return i.a.createElement("div",{className:t},i.a.createElement("svg",{viewBox:"0 0 32 32"},i.a.createElement("path",{fill:n,style:{fill:n},d:"M16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.12-16-16-16zM23.361 23.12c-0.32 0.479-0.88 0.64-1.361 0.32-3.76-2.32-8.48-2.801-14.081-1.521-0.557 0.163-1.039-0.239-1.199-0.719-0.16-0.561 0.24-1.040 0.72-1.2 6.080-1.361 11.36-0.8 15.52 1.76 0.56 0.24 0.639 0.879 0.401 1.36zM25.281 18.72c-0.401 0.56-1.121 0.8-1.683 0.4-4.319-2.64-10.879-3.44-15.919-1.84-0.639 0.16-1.36-0.16-1.52-0.8s0.16-1.361 0.8-1.521c5.84-1.759 13.040-0.877 18 2.161 0.481 0.241 0.72 1.040 0.321 1.6zM25.441 14.24c-5.121-3.040-13.681-3.36-18.561-1.839-0.8 0.239-1.6-0.241-1.84-0.961-0.24-0.801 0.24-1.6 0.96-1.841 5.68-1.68 15.040-1.36 20.961 2.161 0.719 0.4 0.959 1.36 0.559 2.080-0.399 0.561-1.36 0.799-2.079 0.4z"})))},k=n(32),C=n.n(k),N=Object(v.withStyles)(function(e){return{container:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",margin:"5px",marginBottom:"20px",transition:"all .1s .2s linear"},logoIcon:{width:"5em",height:"5em",marginRight:"15px"},logoText:{fontSize:"4em",fontWeight:"700"},indentedContainer:{margin:"0px"},indentedIcon:{width:"3em",height:"3em",marginRight:"15px"},indentedText:Object(E.a)({width:"0px",overflow:"hidden"},e.breakpoints.up(640),{width:"auto",fontSize:"2em"})}})(function(e){var t=e.classes,n=e.indented,a=n?[t.container,t.indentedContainer]:[t.container],r=n?[t.logoIcon,t.indentedIcon]:[t.logoIcon],c=n?[t.logoText,t.indentedText]:[t.logoText];return i.a.createElement("div",{className:a.join(" ")},i.a.createElement(S,{className:r.join(" "),bgColor:"#1DB954"}),i.a.createElement(C.a,{variant:"h1",component:"h1",className:c.join(" ")},"TopTen"))}),A=n(106),I=n(107),T=n.n(I),z=n(109),R=n.n(z),P=n(110),B=n.n(P),D=n(111),_=n.n(D),F=n(112),M=n.n(F),W=n(33),q=n.n(W),H=n(75),J=n(108),U=n.n(J),G=n(113),L=n.n(G),Y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={query:"",searchResults:[]},n.inputRef=i.a.createRef(),n.handleChange=n.handleChange.bind(Object(d.a)(Object(d.a)(n))),n.resetSearch=n.resetSearch.bind(Object(d.a)(Object(d.a)(n))),n.searchArtist=Object(A.a)(300,n.searchArtist),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value;this.searchArtist(t)}},{key:"resetSearch",value:function(){this.inputRef.current.value="",this.setState(Object(o.a)({},this.state,{query:"",searchResults:[]}))}},{key:"searchArtist",value:function(e){var t=this;if(e){var n="search?q=".concat(e,"&type=artist&limit=10");this.context.isSearching(!0),this.context.searchSpotify(n).then(function(n){var a=n.artists.items.filter(function(e){return e.images.length});t.setState(Object(o.a)({},t.state,{query:e,searchResults:a}))})}else this.context.isSearching(!1),this.resetSearch()}},{key:"render",value:function(){var e=this,t=this.state.searchResults,n=this.props,a=n.classes,r=n.indented,c=r&&this.state.query?[a.container,a.indented,a.searchingIndented]:r?[a.container,a.indented]:this.state.query?[a.container,a.searching]:[a.container],o=this.state.query?r?a.resultsIndented:a.results:"";return i.a.createElement(y,null,function(n){return e.context=n,i.a.createElement(H.a,{className:c.join(" ")},i.a.createElement(T.a,{className:a.searchBar,autoFocus:!0,placeholder:"Search Artist",type:"search",inputRef:e.inputRef,onChange:function(t){e.handleChange(t)}}),i.a.createElement(U.a,{in:!!e.state.query},i.a.createElement(H.a,{className:o},e.state.query?t.length?i.a.createElement(R.a,{component:"nav"},t.map(function(t){return i.a.createElement(i.a.Fragment,{key:t.id},i.a.createElement(B.a,{button:!0,onClick:function(){e.context.setArtist(t),e.resetSearch()}},i.a.createElement(_.a,{alt:t.name,src:t.images[0].url}),i.a.createElement(M.a,{primary:t.name})))})):i.a.createElement(q.a,{color:"textSecondary",variant:"h5",component:"h3",className:a.notFound},i.a.createElement(L.a,{className:a.icon}),"No Results"):null)))})}}]),t}(a.Component),$=Object(v.withStyles)(function(e){return{container:Object(E.a)({width:"90%",maxWidth:"640px",margin:"20px auto",boxSizing:"border-box",position:"relative",display:"block",height:"60px",borderRadius:"70px",zIndex:"99999",transition:"all .2s linear"},e.breakpoints.up(640),{fontSize:"2em"}),indented:Object(E.a)({height:"40px"},e.breakpoints.up(640),{marginRight:"0px",width:"300px",height:"50px"}),searchBar:{width:"100%",height:"100%",padding:"10px 40px",fontSize:"1.2rem",opacity:".7"},searching:{borderRadius:"20px",height:"auto",transition:"none"},searchingIndented:{borderRadius:"20px 20px 0 0",transition:"none"},results:{display:"block",height:"40vh!important",overflow:"scroll"},resultsIndented:{backgroundColor:"#424242",borderRadius:"0 0 20px 20px",maxHeight:"400px",overflow:"scroll"},notFound:{padding:"2em",textAlign:"center",height:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},icon:{marginRight:"10px"}}})(Y),K=Object(v.withStyles)(function(e){return{header:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"1080px",padding:"10px 20px",margin:"auto",transition:"height .2s linear"},regular:{transform:"translateY(25vh)",height:"calc(100vh - 25vh)"},indent:{height:"120px",flexDirection:"row"}}})(function(e){var t=e.classes,n=e.selected,a=n?[t.header,t.indent]:[t.header,t.regular];return i.a.createElement("header",{className:a.join(" ")},i.a.createElement(N,{indented:n}),i.a.createElement($,{indented:n}))}),Q=n(121),V=n.n(Q),X=n(122),Z=n.n(X),ee=n(120),te=n.n(ee),ne=n(119),ae=n.n(ne),ie=n(114),re=n.n(ie),ce=n(116),oe=n.n(ce),le=n(118),se=n.n(le),ue=n(117),he=n.n(ue),me=n(115),de=n.n(me),pe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isPlaying:!1},n.togglePlay=n.togglePlay.bind(Object(d.a)(Object(d.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"togglePlay",value:function(){this.setState(function(e){return{isPlaying:!e.isPlaying}})}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",{className:e.controls},i.a.createElement(de.a,{title:"Preview Only",placement:"right"},i.a.createElement(oe.a,{"aria-label":this.state.isPlaying?"Pause":"Play",className:e.playIcon,onClick:this.togglePlay},this.state.isPlaying?i.a.createElement(he.a,null):i.a.createElement(se.a,null))),i.a.createElement(re.a,{url:this.props.url,config:{file:{forceAudio:!0}},playing:this.state.isPlaying,className:e.player}))}}]),t}(a.Component),fe=Object(v.withStyles)(function(e){return{controls:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"10px"},playIcon:{border:"1px solid #fff"},player:{width:"0!important",height:"0!important",position:"absolute"}}})(pe),ge=n(47),be=n.n(ge),ye=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={slideIn:!1},n.openOnSpotify=n.openOnSpotify.bind(Object(d.a)(Object(d.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({slideIn:!0})},this.props.delay)}},{key:"openOnSpotify",value:function(e){return window.open(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.track;return i.a.createElement(ae.a,{direction:"left",in:this.state.slideIn},i.a.createElement(te.a,{className:n.card},i.a.createElement("div",{className:n.details},i.a.createElement(V.a,{className:n.content},i.a.createElement(q.a,{component:"h6",variant:"h6",align:"left",className:n.song},a.name),i.a.createElement(q.a,{color:"textSecondary",align:"left",className:n.albumTypo},a.album.name)),a.preview_url?i.a.createElement(fe,{url:a.preview_url}):i.a.createElement(be.a,{variant:"extended",size:"medium",color:"primary","aria-label":"Open On Spotify",className:n.button,onClick:function(){return e.openOnSpotify(a.external_urls.spotify)}},"Open On Spotify")),i.a.createElement(Z.a,{className:n.cover,image:a.album.images[0].url,title:a.album.name})))}}]),t}(a.Component),xe=Object(v.withStyles)(function(e){return{card:Object(E.a)({display:"flex",width:"100%"},e.breakpoints.up(460),{maxWidth:300}),details:{display:"flex",flexDirection:"column",flex:1},content:{flex:"1 0 auto"},cover:{width:150},song:{fontSize:"1.2rem",lineHeight:"1.2em",marginBottom:5},albumTypo:{fontSize:".9rem",lineHeight:"1em"},button:{display:"block",width:"auto",height:"auto",marginBottom:"10px",margin:"auto",color:"#ffffff",fontSize:".75rem"}}})(ye),ve=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={is_track_playing:!1,player_ref:null},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=Object(o.a)({},this.state);return i.a.createElement(y,null,function(n){var a=n.selectedArtist;return a.tracks?i.a.createElement(x,{value:t},i.a.createElement("div",{className:e.container},a.tracks.map(function(e,t){return i.a.createElement(xe,{track:Object(o.a)({},e),delay:25*t})}))):null})}}]),t}(a.Component),je=Object(v.withStyles)(function(e){var t;return{container:(t={display:"grid",gridTemplateColumns:"1fr",gridGap:"20px",maxWidth:"1080px",margin:" 20px auto",padding:"0px 20px",justifyItems:"center"},Object(E.a)(t,e.breakpoints.up(640),{gridTemplateColumns:"repeat(2, 1fr)"}),Object(E.a)(t,e.breakpoints.up(960),{gridTemplateColumns:"repeat(3, 1fr)"}),t)}})(ve),Oe=Object(v.withStyles)(function(e){return{follow:{display:"flex",flexDirection:"row",width:"auto",height:"auto",marginTop:"10px",margin:"auto",color:"#ffffff"},icon:{width:"1.2em",height:"1.2em",marginRight:"10px"}}})(function(e){var t=e.classes;return i.a.createElement(be.a,{variant:"extended",size:"medium",color:"primary","aria-label":"Follow",className:t.follow},i.a.createElement(S,{className:t.icon,bgColor:"#ffffff"}),"Follow")}),we=n(123),Ee=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},Se=Object(v.withStyles)(function(e){return{container:Object(E.a)({display:"flex",flexDirection:"row",width:"100%",maxWidth:"960px",margin:"auto",justifyContent:"center",alignItems:"center",marginBottom:"30px"},e.breakpoints.up(640),{flexDirection:"column",textAlign:"center",marginBottom:"50px"}),avatar:Object(E.a)({width:"100px",height:"100px",marginRight:"20px"},e.breakpoints.up(640),{height:"200px",width:"200px",margin:"0 0 20px 0"})}})(function(e){var t=e.classes;return i.a.createElement(y,null,function(e){var n=e.selectedArtist;return console.log(n),n?i.a.createElement("div",null,i.a.createElement("div",{className:t.container},i.a.createElement(we.a,{className:t.avatar,alt:n.name,src:n.images[0].url}),i.a.createElement("div",null,i.a.createElement(C.a,{component:"h5",variant:"h5"},n.name),i.a.createElement(C.a,{color:"textSecondary"},"".concat(Ee(n.followers.total||0)," Followers")),i.a.createElement(Oe,null))),i.a.createElement(je,null)):null})}),ke=n(125),Ce=n.n(ke),Ne=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={auth_token:null,selectedArtist:null,isSearching:!1,query:"",searchResults:[]},n.searchSpotify=n.searchSpotify.bind(Object(d.a)(Object(d.a)(n))),n.setArtist=n.setArtist.bind(Object(d.a)(Object(d.a)(n))),n.isSearching=n.isSearching.bind(Object(d.a)(Object(d.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);e=n.exec(a);)t[e[1]]=decodeURIComponent(e[2]);if(t.access_token){var i=t.access_token;this.setState({auth_token:i})}else window.location.href="https://accounts.spotify.com/authorize?client_id=".concat("3eddbd422c4743b8bc218144d4401496","&response_type=token&redirect_uri=").concat(p)}},{key:"searchSpotify",value:function(e){var t=this;return new Promise(function(n){var a="".concat("https://api.spotify.com/v1/").concat(e);fetch(a,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t.state.auth_token)}}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(){window.location.replace(p)})})}},{key:"setArtist",value:function(e){var t=this;if((this.state.selectedArtist?this.state.selectedArtist.id:"")===e.id)return!1;var n="artists/".concat(e.id,"/top-tracks?country=US");this.searchSpotify(n).then(function(e){t.setState(function(t){return Object(o.a)({},t,{selectedArtist:Object(o.a)({},t.selectedArtist,e)})})}),this.setState(function(t){return Object(o.a)({},t,{selectedArtist:e})})}},{key:"isSearching",value:function(e){this.setState({isSearching:e})}},{key:"render",value:function(){var e=this.props.classes,t={auth_token:this.state.auth_token,setArtist:this.setArtist,searchSpotify:this.searchSpotify,isSearching:this.isSearching,selectedArtist:this.state.selectedArtist};return i.a.createElement(v.MuiThemeProvider,{theme:j},i.a.createElement(b,{value:t},i.a.createElement(i.a.Fragment,null,i.a.createElement(w.a,null),this.state.auth_token?i.a.createElement("div",{className:e.container},i.a.createElement(K,{selected:!!this.state.selectedArtist}),i.a.createElement(Se,null)):i.a.createElement(i.a.Fragment,null,i.a.createElement(Ce.a,null),i.a.createElement("h1",null,"Loading...")))))}}]),t}(a.Component),Ae=Object(v.withStyles)(function(e){return{container:{minHeight:"100vh","&::before":{content:'""',position:"fixed",top:0,right:0,left:0,bottom:0,background:"linear-gradient(rgba(0,0,0,0) -30%,#191414)",zIndex:"-1"}}}})(Ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[126,2,1]]]);
//# sourceMappingURL=main.5504b194.chunk.js.map